<x-app-layout title="Browse Categories">
    <div class="bg-white">
        <div class="border-b border-gray-200 bg-white/90">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
                <h1 class="text-3xl font-bold text-gray-900">Browse Categories</h1>
                <p class="mt-2 text-gray-600 max-w-2xl">Find the collection that fits your style—from everyday sneakers to occasion-ready formal footwear.</p>
            </div>
        </div>

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
            @if($categories->isEmpty())
                <div class="rounded-xl border border-gray-200 bg-white p-12 text-center shadow-sm">
                    <h2 class="text-xl font-semibold text-gray-800">No categories available</h2>
                    <p class="mt-2 text-gray-600">Please check back soon—we're updating our catalogue.</p>
                </div>
            @else
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    @foreach($categories as $index => $category)
                        @php
                            $imagePath = $category->image;
                            $hasImage = filled($imagePath);

                            if ($hasImage && !\Illuminate\Support\Str::startsWith($imagePath, ['http://', 'https://', '//'])) {
                                $imagePath = asset($imagePath);
                            }

                            $badgeText = strtoupper(\Illuminate\Support\Str::of($category->slug)->replace('-', ' '));
                        @endphp
                        <a href="{{ route('categories.show', $category->slug) }}" class="card group relative flex flex-col bg-white shadow-sm hover:shadow-lg transition-shadow duration-300 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2">
                            <div class="aspect-video bg-gray-100 overflow-hidden relative">
                                @if($hasImage)
                                    <img src="{{ $imagePath }}" alt="{{ $category->name }}" class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105" onerror="this.classList.add('hidden'); this.nextElementSibling.classList.remove('hidden');">
                                @endif
                                <div class="absolute inset-0 flex items-center justify-center text-gray-300 {{ $hasImage ? 'hidden' : '' }}">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2048 2048" class="h-20 w-20" fill="currentColor">
                                        <path d="M1026.01 1529.15c241.81 60.565 521.069 130.491 706.412-74.763a31.918 31.918 0 0 1 20.536-11.345c17.54-2.288 33.618 10.078 35.904 27.62l-.106.014c62.51 479.26-799.843 262.146-851.104 248.845a32.862 32.862 0 0 1-3.174-.728l-119.369-33.806-17.56 40.972c-4.408 12.742-16.62 21.794-30.834 21.543l.002-.12-460.824-8.079c-8.916.61-18.039-2.49-24.854-9.305l.002-.002c-47.332-47.333-13.901-250.6-9.271-277.29.981-11.399 8.05-21.901 19.301-26.722 16.26-6.969 35.09.564 42.06 16.823l-.038.106c45.045 105.108 303.594 46.206 329.12 40.112a32.182 32.182 0 0 1 3.77-.946l.023.077c98.576-18.483 223.694 12.854 360.004 46.993z"/>
                                        <path d="M1739.44 1413.24c-42.23-24.377-106.466-39.004-181.681-56.124-80.912-18.417-176.19-40.129-266.147-79.13-.319.953-.64 1.9-.965 2.835-21.013 60.489-61.148 108.604-123.323 129.242-33.513 11.124-69.713-7.098-80.793-40.615-11.073-33.497 7.116-69.63 40.59-80.743 28.888-9.589 44.25-42.958 49.805-73.932a526.28 526.28 0 0 1-20.186-14.891c-22.221 53.318-60.653 95.205-117.54 114.089-33.512 11.124-69.713-7.098-80.793-40.615-11.073-33.498 7.116-69.63 40.59-80.743 37.296-12.38 52.054-64.397 52.257-99.726.009-2.242.134-4.453.369-6.634-39.799-61.657-67.482-138.325-76.648-234.572l.105-.035c-1.314-13.81-11.217-24.732-23.922-27.994-32.877-10.623-490.897-153.742-653.952 70.357l-.039-.028c-5.567 7.654-7.248 16.95-5.419 25.532 3.335 19.247 45.996 274.592-2.877 473.598 29.692-7.035 61.3 8.137 73.703 37.084l1.035 2.412c33.227 66.206 235.005 34.792 290.064 19.552 3.536-.978 1.11-.563 6.405-1.557 58.875-11.053 116.361-6.073 176.89 3.7 66.148 10.681 131.856 27.508 196.827 43.782 53.328 13.355 106.647 26.822 160.492 37.964 111.705 23.113 239.177 39.553 350.177 5.166 65.157-20.184 119.146-56.184 163.73-107.767 8.348-9.663 19.137-16.707 31.245-20.206z"/>
                                        <path d="M1275.22 1189.35c.069-17.62-14.16-31.963-31.781-32.032-17.621-.068-31.963 14.16-32.032 31.782 0 .3-.04 105.28-74.196 129.999-16.723 5.527-25.798 23.566-20.27 40.29 5.528 16.721 23.567 25.797 40.29 20.268 118.03-39.343 117.986-189.875 117.99-190.308z"/>
                                        <path d="M1147.1 1093.26c.069-17.622-14.16-31.964-31.781-32.033-17.622-.068-31.964 14.16-32.033 31.781-.001.303-.041 105.281-74.196 130-16.723 5.528-25.797 23.567-20.27 40.29 5.53 16.722 23.568 25.797 40.29 20.27 118.03-39.344 117.987-189.876 117.99-190.309z"/>
                                        <path d="M1118.82 936.145c212.512 53.225 457.934 114.679 620.821-65.704a28.038 28.038 0 0 1 18.047-9.97c15.416-2.012 29.544 8.857 31.555 24.271l-.094.013c35.325 270.828-265.407 288.613-496.595 263.693-11.677-14.075-29.28-23.079-48.994-23.155-13.803-.053-26.603 4.275-37.084 11.677a1935.953 1935.953 0 0 1-30.76-5.097c2.136-13.215 3.385-26.387 3.409-38.502.164-35.27-28.382-64.035-63.688-64.172-19.08-.074-36.247 8.226-48.016 21.443-24.958-43.484-41.4-90.471-51.322-139.262 33.163 7.343 67.517 15.948 102.721 24.764z"/>
                                        <path d="M1745.81 834.275c-37.114-21.422-93.566-34.277-159.667-49.323-71.108-16.185-154.841-35.267-233.899-69.542-.281.838-.563 1.67-.85 2.49-18.467 53.161-53.738 95.446-108.378 113.584-29.453 9.777-61.266-6.238-71.005-35.694-9.73-29.438 6.254-61.193 35.672-70.959 25.388-8.428 38.89-37.754 43.772-64.974a463.196 463.196 0 0 1-17.742-13.088c-19.528 46.858-53.303 83.67-103.297 100.265-29.452 9.777-61.266-6.236-71.004-35.693-9.731-29.44 6.254-61.194 35.672-70.96 32.778-10.88 45.746-56.593 45.926-87.642a56.87 56.87 0 0 1 .323-5.83c-34.976-54.187-59.305-121.566-67.36-206.151l.092-.03c-1.155-12.138-9.858-21.734-21.024-24.602-28.893-9.336-431.418-135.113-574.717 61.832l-.034-.025c-4.892 6.728-6.37 14.896-4.76 22.437 2.565 14.811 31.623 188.682 9.989 349.115 34.92-7.188 70.645-10.762 105.604-11.898 81.204-2.639 164.53 7.315 244.069 23.425 43.315 8.774 84.543 19.61 126.879 31.873 25.491 7.383 44.362 29.084 46.898 55.726l1.122 11.79a618.158 618.158 0 0 0 2.747 20.965c38.512 8.215 76.813 17.95 114.828 27.473 46.865 11.738 93.725 23.572 141.045 33.364 98.17 20.312 210.199 34.76 307.747 4.54 57.263-17.74 104.711-49.375 143.891-94.71 7.338-8.49 16.82-14.682 27.46-17.758z"/>
                                        <path d="M1337.84 637.519c.06-15.487-12.444-28.09-27.93-28.15-15.486-.06-28.09 12.442-28.151 27.928-.001.267-.037 92.525-65.206 114.249-14.697 4.858-22.672 20.712-17.814 35.408 4.86 14.697 20.712 22.672 35.408 17.813 103.727-34.576 103.69-166.87 103.693-167.248z"/>
                                        <path d="M1225.24 553.069c.06-15.487-12.444-28.09-27.93-28.15-15.486-.06-28.09 12.444-28.15 27.93-.001.265-.038 92.524-65.207 114.247-14.697 4.86-22.672 20.712-17.814 35.408 4.86 14.697 20.712 22.672 35.408 17.814 103.728-34.577 103.69-166.87 103.693-167.25z"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="absolute left-4 top-4 rounded-full bg-white px-3 py-1 text-xs font-semibold text-amber-600 shadow">{{ $badgeText }}</div>
                            <div class="flex flex-1 flex-col p-5">
                                <h2 class="text-lg font-semibold text-gray-900">{{ $category->name }}</h2>
                                @if($category->description)
                                    <p class="mt-2 text-sm text-gray-600 line-clamp-3">{{ $category->description }}</p>
                                @elseif($category->meta_description)
                                    <p class="mt-2 text-sm text-gray-600 line-clamp-3">{{ $category->meta_description }}</p>
                                @endif
                                <div class="mt-auto pt-6 text-sm font-semibold text-amber-600 flex items-center gap-2">
                                    <span>View products</span>
                                    <svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                        <path fill-rule="evenodd" d="M10.293 15.707a1 1 0 0 1 0-1.414L13.586 11H5a1 1 0 0 1 0-2h8.586l-3.293-3.293a1 1 0 0 1 1.414-1.414l5 5a1 1 0 0 1 0 1.414l-5 5a1 1 0 0 1-1.414 0Z" clip-rule="evenodd" />
                                    </svg>
                                </div>
                            </div>
                        </a>
                    @endforeach
                </div>
            @endif
        </div>
    </div>
</x-app-layout>
